<!DOCTYPE html>
<html   xmlns="www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="_csrf" content="${_csrf.token}"/>
    <!-- default header name is X-CSRF-TOKEN -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"/>
    <script type="text/javascript" src="/js/jquery-3.2.1.js"></script>
    <title>Regist</title>
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="container">
    <div class="row" style="margin-top:20px">
        <div class="col-xs-12 col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
            <form th:action="@{/register}" th:object="${user}" method="post">
                <fieldset>

                    <h1>注册</h1>
                    <div class="form-horizontal" style="padding-top: 15px">
                        <div class="form-group">
                            <label for="uid" class="col-sm-2 control-label">用户名</label>
                            <div  class="col-sm-10">
                                <input type="text" name="uid" id="uid"  class="form-control"
                                       placeholder="用户名" required="true" autofocus="true" th:field="*{uid}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password" class="col-sm-2 control-label">密码</label>
                            <div  class="col-sm-10">
                                <input type="password" name="password" id="password" class="form-control"
                                       placeholder="密码" required="true"/>
                                <label class="alert alert-danger" th:if="${#fields.hasErrors('password')}" th:text="${#fields.errors('password')}" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="passwordAgain" class="col-sm-2 control-label">再次输入</label>
                            <div  class="col-sm-10">
                                <input type="password" name="passwordAgain" id="passwordAgain" class="form-control"
                                       placeholder="密码" required="true"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="sn" class="col-sm-2 control-label">姓</label>
                            <div  class="col-sm-10">
                                <input type="text" name="sn" id="sn" class="form-control"
                                       placeholder="sn" required="true" th:field="*{sn}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="cn" class="col-sm-2 control-label">名</label>
                            <div  class="col-sm-10">
                                <input type="text" name="cn" id="cn" class="form-control"
                                       placeholder="cn" required="true" th:field="*{cn}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="mail" class="col-sm-2 control-label">邮箱</label>
                            <div  class="col-sm-10">
                                <input type="text" name="mail" id="mail" class="form-control"
                                       placeholder="mail" required="true" th:field="*{mail}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="mobile" class="col-sm-2 control-label">电话</label>
                            <div  class="col-sm-10">
                                <input type="text" name="mobile" id="mobile" class="form-control"
                                       placeholder="mobile" required="true" th:field="*{mobile}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="postaladdress" class="col-sm-2 control-label">地址</label>
                            <div  class="col-sm-10">
                                <input type="text" name="postaladdress" id="postaladdress" class="form-control"
                                       placeholder="postaladdress" required="false" th:field="*{postaladdress}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <!--<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>-->
                                <button type="submit" class="btn btn-primary">注册</button>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
    <div class="container">
        <footer>
            <p>
                © <a >ThinkingInGIS</a> 2017
            </p>
        </footer>
    </div>
</div>
</body>
<script src="/js/common.js" />
<script>
    var issuc = true;
    function doSubmit(){
        console.log();
        $.ajax({
            type: "POST",
            url: "/doregist",
            data: $("#registForm").serialize(),
            success: function(data){
//                $("#msg").style.visibility = "visible";
                $("#log").text(data.message);
                alert(data.message);
            }
        });
    }
</script>
</html>